!function(){"use strict";var t={d:function(e,o){for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{getDoneTodos:function(){return a},getTodos:function(){return u},getTodosNumber:function(){return l},getUnDoneTodos:function(){return p}});var o={};t.r(o),t.d(o,{addTodo:function(){return h},populateTodos:function(){return m},toggleTodo:function(){return y},updateTodo:function(){return T}});var r={};t.r(r),t.d(r,{getTodos:function(){return O}});var n=window.wp.data;const c="ADD_TODO",d="POPULATE_TODOS",i="UPDATE_TODO",s={items:[]};const u=t=>t.items,l=t=>t.items.length,a=t=>t.items.filter((t=>t.completed)).length,p=t=>t.items.filter((t=>!t.completed)).length;var f={FETCH_TODOS(){return window.fetch("https://jsonplaceholder.typicode.com/todos?_limit=10").then((t=>{if(t.ok)return t.json();throw new Error("Could not fetch todos")}))},CREATE_TODO(t){let{title:e}=t;return window.fetch("https://jsonplaceholder.typicode.com/todos",{method:"POST",body:JSON.stringify({title:e,completed:!1,userId:1}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((t=>{if(t.ok)return t.json();throw new Error("Could not create todo.")}))},TOGGLE_TODO(t){let{todo:e}=t;return window.fetch(`https://jsonplaceholder.typicode.com/todos/${e.id}`,{method:"PATCH",body:JSON.stringify({completed:!e.completed}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((t=>{if(t.ok)return t.json();throw new Error("Could not update todo.")}))}};function*h(t){try{const e=yield(t=>({type:"CREATE_TODO",title:t}))(t);return{type:c,todo:e}}catch(t){return(0,n.dispatch)("core/notices").createErrorNotice(t.message||"Could not create todo.")}}function*y(t,e){try{yield T({...t,loading:!0},e);const o=yield(t=>({type:"TOGGLE_TODO",todo:t}))(t);return T(o,e)}catch(t){return(0,n.dispatch)("core/notices").createErrorNotice(t.message||"Could not update todo.")}}const T=(t,e)=>({type:i,index:e,todo:t}),m=t=>({type:d,todos:t});function*O(){try{const t=yield{type:"FETCH_TODOS"};return m(t)}catch(t){return(0,n.dispatch)("core/notices").createErrorNotice(t.message||"Could not fetch todos.")}}const g=(0,n.createReduxStore)("blocks-course/todos",{reducer:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c:return{...t,items:[...t.items,e.todo]};case d:return{...t,items:e.todos};case i:{const o=[...t.items];return o[e.index]=e.todo,{...t,items:o}}default:return t}},selectors:e,actions:o,resolvers:r,controls:f});(0,n.register)(g)}();